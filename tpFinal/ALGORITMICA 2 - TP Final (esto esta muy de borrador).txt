ALGORITMICA 2 - TP Final

ESPECIFICACIONES

Agregar, quitar y modificar modelos
Agregar, quitar y modificar etapas del calendario de mantenimientos
Agregar, quitar y modificar clientes
Agregar, quitar y modificar vehículos
Agregar, quitar y modificar servicios
Consultar mantenimientos realizados a vehículos de un modelo en particular
Consultar datos de clientes que no hayan realizado mantenimientos a sus vehículos
Consultar los mantenimientos solicitados por un cliente

----------------------------------------------------------------------------------------------------
ESTRUCTURAS

LISTA ORDENADA DE MODELOS
tipoClaveModelos = entero {autonumerada 1,2,3,....}
tipoInfoModelos =	reg
				nombre:cadena
				calendario:tipoLista
			finReg


LISTA ORDENADA CALENDARIO DE MANTENIMIENTOS
tipoClaveCalendario = entero {cantidad de km correspondiente a la etapa - 10000, 20000, ....}
tipoInfoCalendario = logico {siempre en V}


LISTA ORDENADA SERVICIOS REALIZADAS
tipoClaveServicios = entero {autonumerado 1,2,3,...}
tipoInfoServicios =	reg
				dniCliente : tipoClaveC
				dominio : tipoClaveV
				etapa : tipoClaveCal
				precioFinal : entero
				kmReal : entero
				fecha : tipoFecha
			finReg


ABB CLIENTES
tipoClaveClientes = entero {DNI del cliente}
tipoInfoClientes =	reg
				nombre : cadena
				telefono : entero
				email : cadena
				vehiculos : tipoLista
			finReg


LISTA ORDENADA VEHICULOS
tipoClaveVehiculos = cadena {patente}
tipoInfoVehiculos =	reg
				modelo : tipoClaveM
				añoFabric : entero {año}
				manten : tipoLista
			finReg


LISTA ORDENADA MANTENIMIENTOS
tipoClaveMantenimientos = tipoClaveServicios
tipoInfoMantenimientos = logico (siempre en V)
----------------------------------------------------------------------------------------------------

NIVEL 0 
Var
	model, client, serv: tipoLista
	opc: entero
Inicio
	crear(model)	{ADT LO}
	crear(client)	{ADT LO}
	crear(serv)		{ADT LO}
	Repetir
		mostrarMenu()		{nivel 1}
		ingresar(opc)		{SC}
		
		segun (opc) hacer	{SC}
			1: ABMModelos(model, serv, client) 	{nivel 1}
			2: ABMClientes(client, serv, model) {nivel 1}
			3: ABMServicios(serv,client,model)	{nivel 1}
			4: ABMVehiculos(client,model)		{nivel 1}
			5: consultas(client,model,serv)		{nivel 1}

		finSegun
	hasta (opc = 6)				{SC}
Excepciones
	
Fin

----------------------------------------------------------------------------------------------------

NIVEL 1

procedimiento ABMModelos (E/S model:tipoLista ; E/S serv:tipoLista ; E/S client:tipoLista)
{Qué Hace: Permite agregar, modificar, o quitar modelos y etapas de sus calendarios de mantenimientos
PRE: 	model = M ; M puede estar vacío o tener modelos válidos o está vacío
POST: 	model = M1 ; M1 tiene modelos válidos
EXCEP:	 }
Var
	opc:entero
Inicio
	repetir
		menuModelos()	{nivel 2}
		ingresar(opc)	{SC}
		segun (opc)		{SC}
			1: agregarModelo(model)					{nivel 2}
			2: modificarModelo(model,serv,client)	{nivel 2}
			3: quitarModelo(model,serv,client)		{nivel 2}
		finSegun
	hasta (opc = 4) 				{SC}
Fin

procedimiento ABMVehiculos (E/S client:tipoListaClientes ; S model:tipoListaModelos)
{Qué Hace: Permite agregar, modificar o quitar vehiculos de los clientes, según el usuario lo desee
PRE: client = C ; C contiene al menos un cliente válido; model = M ; M contiene al menos un modelos valido
POST: client = C1 ; C1 tiene diferencias con respecto a C según lo haya deseado el usuario
EXCEP: }
Var
	opc:entero
	k:tipoClaveClientes
Inicio
	obtenerCliente(k, client)	{nivel 2}
			//excepcion para salir y no ingresar nada
	repetir
		menuVehiculos()	{nivel 2}
		ingresar(opc)	{SC}
		segun opc hacer
			1: agregarVehiculo(client, k, model)		{nivel 2}
			2: modificarVehiculo(client, k, model)		{nivel 2}
			3: quitarVehiculo(client, k, model)			{nivel 2}
		finSegun
	hasta (opc = 4)
Excepciones
	cancelarIngreso => nada	
Fin



procedimiento ABMClientes(E/S client:tipoLista ; E/S serv:tipoLista ; E/S model:tipoLista)
{Qué Hace: Permite agregar, modificar, o quitar clientes y sus vehículos
PRE: 	client = C ; C puede estar vacío o tener clientes válidos
POST:	client = C1; C1 tiene clientes válidos o está vacío
EXCEP:	}
Var
	opc: 
Inicio
	repetir
		menuClientes() 	{nivel 2}
		ingresar(opc)	{SC}
		
		segun (opc) hacer
			1: agregarCliente(client) 			{nivel 2}
			2: modificarCliente(client,model)	{nivel 2}
			3: quitarCliente(client,serv)	{nivel 2}
		finSegun		
	hastan(opc = 4)				{SC}
Fin

procedimiento ABMServicios(E/S serv:tipoLista ; E/S client:tipoLista ; E/S model:tipoLista)
{Qué Hace: Permite agregar, modificar, o quitar servicios de mantenimiento realizados
PRE: 	serv = S ; S puede estar vacío o tener servicios válidos
POST:	serv = S1; S1 tiene servicios válido o está vacío
EXCEP:	}
Var
	opc:entero
Inicio
	repetir
		menuServicios() {nivel 2}
		ingresar(opc)	{SC}

		segun opc hacer
			1: agregarServicio(serv,client,model)	{nivel 2}
			2: modificarServicio(serv,client,model)	{nivel 2}
			3: quitarServicio(serv,client,model)	{nivel 2}
		finSegun
	hasta (opc = 4)					{SC}
Fin

AB
procedimiento consultas(E serv:tipoLista ; E model:tipoLista ; E client:tipoLista)
{Qué Hace: Permite realizar distintas consultas especificadas
PRE:	serv = S ; S tiene servicios válidos ; model = M ; M tiene modelos válidos
		client = C ; C tiene clientes válidos
POST:	
EXCEP:	}
Var
	opc:entero
Inicio

	repetir
		menuConsultas()	{nivel 2}
		ingresar(opc)	{SC}

		segun opc hacer
			1: mantenPorCliente(client,serv) 	{nivel 2}
			2: mantPorModelo(model,serv)		{nivel 2}
			3: datosClientesSinMant(client)		{nivel 2}
		finSegun
	hasta (que el usuario lo desee)				{SC}
Fin 

----------------------------------------------------------------------------------------------------

NIVEL 2 

procedimiento agregarModelo (E/S model:tipoLista)
{Qué Hace: crea un nuevo modelo
PRE:	model = Mo ; Mo puede estar vacío o tener modelos válidos
POST:	model = Mo1; Mo1 tiene un modelo válido más que Mo
EXCEP:	}
Var
	i:tipoInfoM
	k:tipoClaveM
Inicio

	si (longitud(model) = 0) entonces	{ADT LO}
		k <- 1
	siNo
		recuUlt(model, k)				{ADT LO}
		k <- k+1
			//generamos la clave autonumerada
	finSi

	mostrar("Ingrese el nombre del modelo")	{SC}

	ingresar(i.nombre)						{SC}

	crear(i.calendario)						{ADT LO}

	insertar(model, k, i)					{ADT LO}

Excepciones
	listaLLena => mostrar("No hay espacio para un nuevo modelo, intente nuevamente más tarde.")
Fin

procedimiento agregarCliente (E/S client:tipoLista)
{Qué Hace: agrega un nuevo cliente
PRE: client = C ; C puede estar vacío o tener clientes válidos
POST: client = C1 ; C1 tiene un cliente nuevo agregado
EXCEP:	}
Var
	i:tipoInfoC
	k:tipoClaveC
Inicio
	mostrar("DNI")						{SC}
	
	enteroEnRango(1000000, 40000000, k)	{SC}

	mostrar("Telefono")					{SC}

	ingresar(i.telefono)				{SC}

	mostrar("E-Mail")					{SC}

	ingresar(i.email)					{SC}

	crear(i.vehiculos)					{ADT LO}

	insertar(client, k, i)				{ADT LO}
Excepciones
	listaLLena => mostrar("No se puede agregar un cliente, intente nuevamente más tarde")
Fin


procedimiento menuModelos()
{Qué Hace: muestra el menu con las opciones correspondientes al ABM de modelos
PRE: -
POST:-
EXCEP: -}
Inicio

	mostrar("Seleccione una Opcion")													{SC}
	mostrar("1 - Agregar Modelo")														{SC}
	mostrar("2 - Modificar Modelo (Nombre o Etapas de su calendario de Mantenimiento)")	{SC}
	mostrar("3 - Quitar Modelo")														{SC}
	mostrar("4 - Salir")																{SC}

Fin

procedimiento modificarCliente(E/S client:tipoLista ; E model:tipoLista)
{Qué Hace: permite modificar los datos pertenecientes a un cliente en particular
PRE: client = C ; C contiene al menos un cliente válido ; model = M ; M contiene al menos un modelo valido
POST: client = C1 ; C1 contiene un cliente con los datos modificados o no
EXCEP: - }
Var
	k:tipoClaveC
	opc:entero
Inicio

	obtenerCliente(k, client)	{nivel 2} //opcion para cancela modif a traves de excep
	menuModifClient()	{nivel 3}
	ingresar(opc)		{SC}				
	segun opc hacer
		1:modifNombre(k)		{nivel 3}
		2:modifTelefono(k)		{nivel 3}
		3:modifEmail(k)			{nivel 3}
	finSegun
Excepciones
	cancelarIngreso => nada
Fin

procedimiento modificarModelo(E/S model:tipoLista ; E/S serv:tipoLista ; E/S client:tipoLista)
{Qué Hace: Permite modificar los datos correpondientes a un modelo en particular y actualiza las relaciones de dicho modelos con los clientes y los servicios realizados
PRE: model = M ; M contiene al menos un modelo ; serv = S ; client = C
POST: model = M1 ; M1 tiene un modelo con datos distintos
EXCEP: -	}
Var
	k:tipoClaveM
Inicio

	obtenerModelo(k,model)	{nivel 3}	//opcion para cancela modif a traves excep
	menuModifModelo()	{nivel 3}
	ingresar(opc)		{SC}
	segun (opc) hacer
		1: modificarNombre(k)	{nivel 3}
		2: ABMCalendario()		{nivel 3}
	finSegun
	actualizarVM(k,client)	{nivel 3}
	actualizarSM(k,serv)	{nivel 3}

Excepciones
	cancelarIngreso => nada
Fin

procedimiento quitarCliente(E/S client:tipoLista ; E/S serv:tipoLista)
{Qué Hace: quita un cliente y actualiza su relación con respecto a los servicios a su nombre
PRE: client = C ; C tiene que tener al menos un cliente válido ; serv = S 
POST: client = C1 ; C1 tiene un cliente menos ; serv = S1 ; S1 tiene uno o más servicios menos si el cliente eliminado tenía algún servicio a su nombre
EXCEP:	}
Var
	k:tipoClaveC
Inicio

	obtenerCliente(k,client)	{nivel 2}	//opcion para cancela modif a traves excep
	
	si (confirma("Esta seguro que desea eliminar este cliente?")) ent
		limpiarNodo(client, k)		{nivel 3}
		suprimir(client, k)			{ADT LO}
		actualizarSC(k, serv)		{nivel 3}
	finSi

Excepciones
	cancelarIngreso => nada
Fin

procedimiento quitarModelo(E/S model:tipoLista ; E/S serv:tipoLista ; E/S client:tipoLista)
{Qué Hace: quita un modelo y actualiza su relacion con los clientes y los servicios
PRE:	model = M ; M tiene al menos un modelo ; serv = S ; client = C
POST:	model = M1 ; M1 tiene un cliente menos ; serv = S1 ; client = C1 ; C1 y S1 tienen clientes o servicios menos si el modelo eliminado tenia servicios
		relacionados o un cliente tenía un vehiculo de ese modelo en particular
EXCEP: }
Var
	k:tipoClaveM
Inicio

	obtenerModelo(k, model)	{nivel 3}	//opcion para cancela modif a traves excep

	si (confirma("Está seguro que desea eliminar este modelo?")) ent
		limpiarNodo(model, k) 	{nivel 3}
		suprimir(model, k)		{nivel 3}
		actualizarSM(k, serv)	{nivel 3}
		actualizarVM(k, client)	{nivel 3}
	finSi

Excepciones
	cancelarIngreso => nada
Fin

